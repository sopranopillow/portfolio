{"version":3,"sources":["GameLogic/store/actions/PlayerActions/Types.ts","GameLogic/store/actions/PlayerActions/PlayerActions.tsx","GameLogic/store/actions/ChestActions/Types.ts","GameLogic/store/actions/ChestActions/ChestActions.tsx","GameLogic/store/actions/WallActions/Types.ts","GameLogic/store/actions/WallActions/WallActions.tsx","GameLogic/store/actions/index.ts","GameLogic/store/reducers/index.ts","GameLogic/store/reducers/PlayerReducer/PlayerReducer.tsx","GameLogic/store/reducers/ChestReducer/ChestReducer.tsx","GameLogic/store/reducers/WallReducer/WallReducer.tsx","Resources/Sprites/chest.png","GameLogic/Components/Loop.tsx","GameLogic/GeneralUtils/Collision.tsx","Components/Player.tsx","Components/Chest.tsx","Components/App.tsx","serviceWorker.ts","GameLogic/store/store.tsx","index.tsx"],"names":["PlayerActionTypes","ChestActionTypes","setPlayer","update","type","SET","WallActionTypes","addChest","boundaries","toggle","ADD","addWall","initialPlayerState","playerReducer","state","action","initialChestState","chestReducer","initialWallState","wallReducer","module","exports","Loop","requestID","fps","keys","log","timeMeasurements","keyChange","ev","setState","map","key","isToggle","isPressed","loop","push","performance","now","msPassed","length","Math","round","props","player","chests","window","requestAnimationFrame","this","document","onkeydown","onkeyup","cancelAnimationFrame","className","React","connect","store","walls","checkCollision","firstObject","secondObject","topLeft","x","bottomRight","y","checkProximity","proximity","Player","nextPos","position","newPos","forEach","checkChestsCollisions","i","find","undefined","chest","proximityRange","size","left","top","styles","backgroundColor","width","height","style","Chest","toggleContent","showContent","src","content","App","Component","Boolean","location","hostname","match","rootReducer","combineReducers","createStore","compose","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","configureStore","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ba9506b2.chunk.js","sourcesContent":["export enum PlayerActionTypes {\r\n    SET = 'SET'\r\n}\r\n\r\nexport interface ISetPlayer {\r\n    type: PlayerActionTypes;\r\n    update: Function;\r\n}\r\n\r\n// ILoopSubscribe | ILoopX\r\nexport type PlayerActions = ISetPlayer;","import { PlayerActions, PlayerActionTypes } from './Types';\r\n\r\nexport const setPlayer = (\r\n    update: Function\r\n): PlayerActions => {\r\n    return {\r\n        type: PlayerActionTypes.SET,\r\n        update: update\r\n    };\r\n};","import { IBoundaries } from \"../../../GeneralUtils\";\r\n\r\nexport enum ChestActionTypes {\r\n    ADD = 'ADD'\r\n}\r\n\r\nexport interface IAddChest {\r\n    type: ChestActionTypes.ADD;\r\n    boundaries: IBoundaries;\r\n    toggle: Function;\r\n}\r\n\r\nexport type ChestActions = IAddChest;","import { ChestActions, ChestActionTypes } from './Types';\r\nimport { IBoundaries } from '../../../GeneralUtils';\r\n\r\nexport const addChest = (\r\n    boundaries: IBoundaries,\r\n    toggle: Function\r\n): ChestActions => {\r\n    return {\r\n        type: ChestActionTypes.ADD,\r\n        boundaries: boundaries,\r\n        toggle: toggle\r\n    }\r\n}","import { IBoundaries } from \"../../../GeneralUtils\";\r\n\r\nexport enum WallActionTypes {\r\n    ADD = 'ADD'\r\n}\r\n\r\nexport interface IAddWall{\r\n    type: WallActionTypes.ADD;\r\n    boundaries: IBoundaries;\r\n}\r\n\r\nexport type WallActions = IAddWall;","import { IBoundaries } from \"../../../GeneralUtils\";\r\nimport { WallActions, WallActionTypes } from \"./Types\";\r\n\r\n\r\nexport const addWall = (\r\n    boundaries: IBoundaries\r\n): WallActions => {\r\n    return {\r\n        type: WallActionTypes.ADD,\r\n        boundaries: boundaries\r\n    }\r\n}","export * from './PlayerActions/PlayerActions';\r\nexport * from './PlayerActions/Types';\r\nexport * from './ChestActions/ChestActions';\r\nexport * from './ChestActions/Types';\r\nexport * from './WallActions/WallActions';\r\nexport * from './WallActions/Types';","export * from './PlayerReducer/PlayerReducer';\r\nexport * from './PlayerReducer/Types';\r\nexport * from './ChestReducer/ChestReducer';\r\nexport * from './ChestReducer/Types';\r\nexport * from './WallReducer/WallReducer';\r\nexport * from './WallReducer/Types';","import { PlayerActionTypes, PlayerActions } from '../../actions';\r\nimport { IPlayer } from './Types';\r\n\r\nconst initialPlayerState: IPlayer = {\r\n    update: ()=>{},\r\n}\r\n\r\nexport const playerReducer = (\r\n    state = initialPlayerState,\r\n    action: PlayerActions\r\n): IPlayer => {\r\n    switch(action.type) {\r\n        case PlayerActionTypes.SET:\r\n            return {\r\n                update: action.update\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { ChestActions, ChestActionTypes } from '../../actions';\r\nimport { IChest } from './Types';\r\n\r\nconst initialChestState: IChest[] = [];\r\n\r\nexport const chestReducer = (\r\n    state = initialChestState,\r\n    action: ChestActions\r\n): IChest[] => {\r\n    switch(action.type){\r\n        case ChestActionTypes.ADD:\r\n            return [\r\n                ...state,\r\n                {\r\n                    boundaries: action.boundaries,\r\n                    toggle: action.toggle\r\n                }\r\n            ]\r\n        default:\r\n            return state;\r\n    }\r\n}","import { IWall } from \"./Types\";\r\nimport { WallActions, WallActionTypes } from \"../../actions\";\r\n\r\nconst initialWallState: IWall[] = [];\r\n\r\nexport const wallReducer = (\r\n    state = initialWallState,\r\n    action: WallActions\r\n): IWall[] =>{\r\n    switch(action.type){\r\n        case WallActionTypes.ADD:\r\n            return [\r\n                ...state,\r\n                {\r\n                    boundaries: action.boundaries\r\n                }\r\n            ]\r\n        default:\r\n            return state;\r\n    }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA9ElEQVR42u2XSw7CMAxEexgWLNkg9tyip+Qy3AdWidzROK5jO2yoZBWJz3sTNxbZtv+14LrfLp9WP4G+X49e5RIMuj+vvUokWFoJxUqTsNKWCHjTpknMpg0JZKVl8KFAdloJbWA6F6rT4u8fBNob7Z4NxtU8CEjojIRMh6WtZhdA2KwA9thqoyrglZCflffT21AulUdg1GO3AAJHAgzMel8iwBKHhxDuS3yNX8oA0/2vPVCYOjL36ejVHkAmkj7zmQCTSFtur4AX7gKfaYPnH84UOCoQBmsSlkAqmElYk7DskDESWHqwwP1fmtoSWH6mW32Y/ALQRbQtJOefqgAAAABJRU5ErkJggg==\"","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { IAppState } from '../store/store';\r\nimport { IPlayer, IChest, IWall } from '../store/reducers';\r\nimport { setPlayer, addChest, addWall } from '../store/actions';\r\nimport './Loop.styles.css';\r\n\r\ninterface ILoopProps {\r\n    player: IPlayer;\r\n    chests: IChest[];\r\n    walls: IWall[];\r\n}\r\n\r\ninterface ILoopState {\r\n    requestID: number;\r\n    fps: number;\r\n    keys: IKey[];\r\n    log: String;\r\n}\r\n\r\nexport interface IKey {\r\n    key: string;\r\n    isPressed: boolean;\r\n    isToggle: boolean;\r\n}\r\n\r\nclass Loop extends React.Component<ILoopProps, ILoopState> {\r\n    public readonly state: Readonly<ILoopState> = {\r\n        requestID: 0,\r\n        fps: 0,\r\n        keys: [],\r\n        log: 'empty'\r\n    }\r\n\r\n    private timeMeasurements: number[] = [];\r\n\r\n    componentDidMount(){\r\n        this.setState({\r\n            requestID: window.requestAnimationFrame(this.loop),\r\n            keys: [\r\n                {key: 'w', isPressed: false, isToggle: false},\r\n                {key: 'a', isPressed: false, isToggle: false},\r\n                {key: 's', isPressed: false, isToggle: false},\r\n                {key: 'd', isPressed: false, isToggle: false},\r\n                {key: 'e', isPressed: false, isToggle: true}\r\n            ]\r\n        });\r\n        document.onkeydown = this.keyChange;\r\n        document.onkeyup = this.keyChange;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const { requestID } = this.state;\r\n        if(requestID){\r\n            window.cancelAnimationFrame(requestID);\r\n        }\r\n    }\r\n\r\n    keyChange = (ev: KeyboardEvent) => {\r\n        const { keys } = this.state;\r\n\r\n        if(ev.type === 'keyup'){\r\n            this.setState({\r\n                keys: keys.map((key: IKey) => {\r\n                    if(ev.key === key.key && !key.isToggle){\r\n                        return {key: key.key, isPressed: false, isToggle: false};\r\n                    }else if(ev.key === key.key && key.isToggle){\r\n                        return {key: key.key, isPressed: !key.isPressed, isToggle: true};\r\n                    }\r\n                    else {\r\n                        return key;\r\n                    }\r\n                })\r\n            })\r\n        }else if(ev.type === 'keydown'){\r\n            this.setState({\r\n                keys: keys.map((key: IKey) => {\r\n                    if(ev.key === key.key && !key.isToggle){\r\n                        return {key: key.key, isPressed: true, isToggle: false};\r\n                    }else{\r\n                        return key;\r\n                    }\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    loop = () => {\r\n        this.timeMeasurements.push(performance.now());\r\n        const msPassed = this.timeMeasurements[this.timeMeasurements.length-1] - this.timeMeasurements[0];\r\n        if (msPassed >= 0.5 * 1000) {\r\n            this.setState({\r\n                fps: Math.round(this.timeMeasurements.length / msPassed * 1000 * 2) / 2\r\n            });\r\n            this.timeMeasurements = [];\r\n        }\r\n\r\n        this.props.player.update(this.state.keys, this.props.chests);\r\n\r\n        this.setState({\r\n            requestID: window.requestAnimationFrame(this.loop)\r\n        })\r\n    }\r\n\r\n    public render() {\r\n        const { fps, log } = this.state;\r\n        return (\r\n            <div className=\"loopStats\">\r\n                <div>{`fps: ${fps} log: ${log}`}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store: IAppState) => {\r\n    return {\r\n        player: store.player,\r\n        chests: store.chests,\r\n        walls: store.walls\r\n    };\r\n  };\r\n\r\nexport default connect(mapStateToProps, { setPlayer, addChest, addWall })(Loop);","export interface IBoundaries {\r\n    topLeft: Point;\r\n    bottomRight: Point;\r\n}\r\n\r\nexport interface Point {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport const checkCollision = (firstObject: IBoundaries, secondObject: IBoundaries): boolean => {\r\n    if(firstObject.topLeft.x > secondObject.bottomRight.x ||\r\n        firstObject.bottomRight.x < secondObject.topLeft.x) {\r\n        return false;\r\n    }\r\n    if(firstObject.topLeft.y > secondObject.bottomRight.y ||\r\n        firstObject.bottomRight.y < secondObject.topLeft.y) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n\r\nexport const checkProximity = (firstObject: IBoundaries, secondObject: IBoundaries, proximity: number): boolean => {\r\n    if(firstObject.topLeft.x > (secondObject.bottomRight.x + proximity) ||\r\n        firstObject.bottomRight.x < (secondObject.topLeft.x - proximity)) {\r\n        return false;\r\n    }\r\n    if(firstObject.topLeft.y > (secondObject.bottomRight.y + proximity) ||\r\n        firstObject.bottomRight.y < (secondObject.topLeft.y - proximity)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setPlayer } from '../GameLogic/store/actions';\r\nimport { IAppState } from '../GameLogic/store/store';\r\nimport { IKey } from '../GameLogic/Components/Loop';\r\nimport { IBoundaries, checkCollision, checkProximity } from '../GameLogic/GeneralUtils';\r\nimport { IChest } from '../GameLogic/store/reducers';\r\n\r\ninterface IPlayerState {\r\n    position: IBoundaries;\r\n}\r\n\r\ninterface IPlayerProps {\r\n    setPlayer: typeof setPlayer;\r\n    size: number;\r\n    left: number;\r\n    top: number;\r\n    proximityRange: number;\r\n}\r\n\r\nclass Player extends React.Component<IPlayerProps, IPlayerState>{\r\n    constructor(props: IPlayerProps){\r\n        super(props);\r\n        const { size, left, top } = this.props;\r\n\r\n        this.state = ({\r\n            position: {\r\n                topLeft: {\r\n                    x: left,\r\n                    y: top\r\n                },\r\n                bottomRight: {\r\n                    x: left + size,\r\n                    y: top + size\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.setPlayer(this.update);\r\n    }\r\n\r\n    nextPos = (keys: IKey[]): IBoundaries => {\r\n        const {bottomRight, topLeft} = this.state.position;\r\n        let newPos: IBoundaries = {\r\n            topLeft: {\r\n                x: topLeft.x,\r\n                y: topLeft.y\r\n            },\r\n            bottomRight: {\r\n                x: bottomRight.x,\r\n                y: bottomRight.y\r\n            }\r\n        };\r\n\r\n        keys.forEach((key: IKey) =>{\r\n            if(key.isPressed){\r\n                switch(key.key){\r\n                    case 'a':\r\n                        newPos.topLeft.x-=2;\r\n                        newPos.bottomRight.x-=2;\r\n                        break;\r\n                    case 's':\r\n                        newPos.topLeft.y+=2;\r\n                        newPos.bottomRight.y+=2;\r\n                        break;\r\n                    case 'd':\r\n                        newPos.topLeft.x+=2;\r\n                        newPos.bottomRight.x+=2;\r\n                        break;\r\n                    case 'w':\r\n                        newPos.topLeft.y-=2;\r\n                        newPos.bottomRight.y-=2;\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n\r\n        return newPos;\r\n    }\r\n\r\n    checkChestsCollisions = (nextPos: IBoundaries, chests: IChest[]): boolean => {\r\n        for(let i = 0; i < chests.length; i++) {\r\n            if(checkCollision(nextPos, chests[i].boundaries)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    update = (keys: IKey[], chests: IChest[]) => {\r\n        const nextPos = this.nextPos(keys); // getting next position\r\n        // checking if the square collides with the chests\r\n        if(!this.checkChestsCollisions(nextPos, chests)){\r\n            this.setState({\r\n                position: nextPos\r\n            });\r\n        }\r\n\r\n        let key = keys.find((key: IKey)=>{\r\n            return (key.key === 'e' && key.isPressed);\r\n        })\r\n\r\n        if(key !== undefined) {\r\n            chests.forEach((chest: IChest)=>{\r\n                if(checkProximity(this.state.position, chest.boundaries, this.props.proximityRange)) {\r\n                    chest.toggle();\r\n                    key!.isPressed = false;\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const { size } = this.props;\r\n        const { topLeft } = this.state.position;\r\n        const styles: React.CSSProperties = {\r\n            position: 'absolute',\r\n            backgroundColor: 'red',\r\n            left: topLeft.x + 'px',\r\n            top: topLeft.y + 'px',\r\n            width: size + 'px',\r\n            height: size + 'px',\r\n        }\r\n\r\n        return <div style={styles}></div>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store: IAppState) => {\r\n    return {\r\n        player: store.player,\r\n        chests: store.chests,\r\n        walls: store.walls\r\n    };\r\n  };\r\n\r\nexport default connect(mapStateToProps,{ setPlayer })(Player);\r\n","import * as React from 'react';\r\nimport { addChest } from '../GameLogic/store/actions';\r\nimport { IAppState } from '../GameLogic/store/store';\r\nimport { connect } from 'react-redux';\r\nimport { IBoundaries } from '../GameLogic/GeneralUtils';\r\nimport './Chest.styles.css';\r\nimport chest from '../Resources/Sprites/chest.png';\r\n\r\ninterface IChestState {\r\n    position: IBoundaries;\r\n    showContent: boolean;\r\n}\r\n\r\ninterface IChestProps {\r\n    addChest: typeof addChest;\r\n    size: number;\r\n    top: number;\r\n    left: number;\r\n    content: JSX.Element;\r\n}\r\n\r\nclass Chest extends React.Component<IChestProps, IChestState> {\r\n    constructor(props: IChestProps){\r\n        super(props);\r\n        const {left, top, size} = this.props;\r\n        this.state = ({\r\n            position: {\r\n                topLeft: {\r\n                    x: left,\r\n                    y: top\r\n                },\r\n                bottomRight: {\r\n                    x: left + size,\r\n                    y: top + size\r\n                }\r\n            },\r\n            showContent: false\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.addChest(this.state.position, this.toggleContent);\r\n    }\r\n\r\n    toggleContent = (): void => {\r\n        this.setState({\r\n            showContent: !this.state.showContent\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const { size } = this.props;\r\n        const { topLeft } = this.state.position;\r\n        const styles: React.CSSProperties = {\r\n            position: 'absolute',\r\n            width: size + 'px',\r\n            height: size + 'px',\r\n            left: topLeft.x + 'px',\r\n            top: topLeft.y + 'px'\r\n        }\r\n        return(\r\n            <>\r\n                <img src={chest} style={styles}></img>\r\n                {this.state.showContent && <div className=\"content\">{this.props.content}</div>}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store: IAppState) => {\r\n    return {\r\n        chests: store.chests,\r\n        player: store.player,\r\n        walls: store.walls\r\n    };\r\n  };\r\n\r\nexport default connect(mapStateToProps,{ addChest })(Chest);","import React from 'react';\r\nimport Loop from '../GameLogic/Components/Loop';\r\nimport Player from '../Components/Player';\r\nimport Chest from './Chest';\r\nimport { setPlayer, addChest, addWall } from '../GameLogic/store/actions';\r\nimport { IAppState } from '../GameLogic/store/store';\r\nimport { connect } from 'react-redux';\r\n\r\nclass App extends React.Component<{}>{\r\n  render(){\r\n    return (\r\n      <>\r\n        <Player left={150} top={150} proximityRange={10} size={32}/>\r\n        <Chest content={<div>hello</div>} left={100} top={100} size={32}/>\r\n        <Loop/>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (store: IAppState) => {\r\n  return {\r\n      player: store.player,\r\n      chests: store.chests,\r\n      walls: store.walls\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps,{ setPlayer, addChest, addWall })(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { applyMiddleware, combineReducers, createStore, Store, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { IPlayer, playerReducer, chestReducer, IChest, IWall, wallReducer } from './reducers';\r\n\r\nexport interface IAppState {\r\n    player: IPlayer;\r\n    chests: IChest[];\r\n    walls: IWall[];\r\n}\r\n\r\nconst rootReducer = combineReducers<IAppState>({\r\n    player: playerReducer,\r\n    chests: chestReducer,\r\n    walls: wallReducer\r\n});\r\n\r\nconst configureStore = (): Store<IAppState, any> => {\r\n    const store = createStore(rootReducer, undefined, compose(\r\n        applyMiddleware(thunk),\r\n        (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__()));\r\n    return store;\r\n}\r\n\r\nexport default configureStore;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './Components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { Provider } from 'react-redux';\r\nimport configureStore from './GameLogic/store/store';\r\n\r\nconst store = configureStore();\r\n\r\nReactDOM.render(\r\n<Provider store={store}>\r\n    <App/>\r\n</Provider>\r\n, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}